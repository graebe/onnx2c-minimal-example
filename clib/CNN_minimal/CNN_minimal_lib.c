// This file is computer-generated by onnx2c 
// (TODO: add creating command line here)
// (TODO: print creation date here )

// ONNX model:
// produced by pytorch, version 1.13.0
// ONNX IR version: 14
// Model documentation: 
/*

*/

#include <float.h>
#include <math.h>
#include <stdbool.h>
#include <stdint.h>
#include <string.h>
#define MAX(X,Y) ( X > Y ? X : Y)
#define MIN(X,Y) ( X < Y ? X : Y)
#define CLIP(X,L) ( MAX(MIN(X,L), -L) )

static const float tensor_main_0_weight[3][1][3][3] = 
{
  {
    {
      {0.11539816856384277344f, 0.19025978446006774902f, 0.22608444094657897949f},
      {0.17648863792419433594f, 0.31136238574981689453f, -0.067990303039550781250f},
      {-0.073703050613403320312f, 0.058488767594099044800f, -0.15397462248802185059f}
    }
  },
  {
    {
      {-0.23665647208690643311f, 0.25984299182891845703f, 0.14504000544548034668f},
      {-0.020168503746390342712f, 0.15909478068351745605f, -0.32206636667251586914f},
      {-0.32998523116111755371f, -0.15108454227447509766f, 0.049226485192775726318f}
    }
  },
  {
    {
      {-0.13848869502544403076f, -0.13408216834068298340f, 0.25270649790763854980f},
      {-0.077918767929077148438f, 0.14481759071350097656f, 0.061294041574001312256f},
      {-0.18647846579551696777f, -0.14991307258605957031f, -0.19052803516387939453f}
    }
  }
};
static const float tensor_main_0_bias[3] = 
{-0.015705784782767295837f, 0.14357475936412811279f, -0.30553632974624633789f};
static const float tensor_main_3_weight[1][480] = 
{
  {-0.0081222867593169212341f, 0.041464146226644515991f, 0.027242030948400497437f, -0.041188038885593414307f, 0.042348042130470275879f, -0.021963428705930709839f, -0.0096660070121288299561f, 0.024731343612074851990f, 0.0069994484074413776398f, 0.028525725007057189941f, -0.026384029537439346313f, -0.0068542682565748691559f, -0.040939792990684509277f, -0.0043966490775346755981f, 0.015661174431443214417f, -0.019057476893067359924f, -0.034442260861396789551f, -0.034030891954898834229f, -0.038896124809980392456f, 0.040660746395587921143f, 0.019807932898402214050f, 0.024159992113709449768f, -0.0045399684458971023560f, -0.018397444859147071838f, -0.0040918476879596710205f, -0.0043001449666917324066f, 0.013294373638927936554f, 0.012420733459293842316f, -0.0080480473116040229797f, -0.010618178173899650574f, -0.013893382623791694641f, 0.021177178248763084412f, 0.0078643439337611198425f, -0.020501993596553802490f, 0.0053788498044013977051f, -0.0068465364165604114532f, 0.0022151675075292587280f, 0.018049832433462142944f, -0.021994508802890777588f, -0.024873679503798484802f, -0.041368190199136734009f, 0.027910996228456497192f, 0.025191109627485275269f, -0.039281293749809265137f, -0.043333072215318679810f, 0.020557183772325515747f, -0.019152343273162841797f, 0.031894199550151824951f, 0.025344271212816238403f, 0.011475009843707084656f, 0.023975985124707221985f, 0.040637567639350891113f, -0.023002346977591514587f, 0.044384285807609558105f, -0.010854535736143589020f, -0.021323425695300102234f, 0.045487243682146072388f, 0.0032454028259962797165f, -0.023550465703010559082f, 0.018848508596420288086f, 0.022943545132875442505f, -0.035818707197904586792f, 0.025433164089918136597f, -0.041112262755632400513f, 0.0064382278360426425934f, -0.017234304919838905334f, -0.0022147158160805702209f, 0.027349874377250671387f, -0.037147883325815200806f, 0.026597093790769577026f, 0.016063436865806579590f, 0.038068212568759918213f, -0.0074262944981455802917f, -0.027360472828149795532f, 0.010102984495460987091f, -0.032070737332105636597f, -0.016626758500933647156f, 0.039262112230062484741f, 0.036874406039714813232f, -0.025540931150317192078f, 0.036822453141212463379f, -0.043273206800222396851f, 0.039426356554031372070f, 0.027130857110023498535f, -0.021356306970119476318f, 0.036751803010702133179f, 6.5217442170251160860e-05f, 0.042339123785495758057f, -0.0098665235564112663269f, 0.0049970131367444992065f, 0.011415462009608745575f, -0.0027356392238289117813f, 0.023629367351531982422f, -0.016045259311795234680f, -0.0075120632536709308624f, -0.032437715679407119751f, -0.040713090449571609497f, -0.039787333458662033081f, -0.018315326422452926636f, -0.032733272761106491089f, 0.026136327534914016724f, -0.016834169626235961914f, 0.010312381200492382050f, 0.045301288366317749023f, -0.013611134141683578491f, 0.038891326636075973511f, -0.0070665269158780574799f, -0.032468609511852264404f, 0.041593957692384719849f, 0.031184192746877670288f, 0.036767151206731796265f, -0.043176013976335525513f, -0.038954555988311767578f, 0.042427107691764831543f, 0.034874308854341506958f, -0.030289229005575180054f, -0.032407153397798538208f, -0.015253137797117233276f, -0.00071195611963048577309f, 0.0012589425314217805862f, -0.0088858464732766151428f, -0.020939128473401069641f, -0.0010318023851141333580f, -0.016658147796988487244f, 0.043651994317770004272f, 0.034816220402717590332f, 0.043688889592885971069f, -0.013706153258681297302f, -0.044353295117616653442f, 0.010679440572857856750f, 0.033189054578542709351f, -0.010092673823237419128f, -0.030379367992281913757f, 0.022908374667167663574f, -0.035605870187282562256f, -0.028009427711367607117f, 0.026849905028939247131f, 0.0064129321835935115814f, 0.020394679158926010132f, -0.028089340776205062866f, -0.029615426436066627502f, 0.040883641690015792847f, 0.028132282197475433350f, -0.0078450115397572517395f, -0.011801086366176605225f, 0.043207094073295593262f, -0.039578877389430999756f, -0.033163409680128097534f, 0.026110645383596420288f, 0.016402419656515121460f, 0.035946395248174667358f, -0.043718699365854263306f, -0.020814308896660804749f, 0.0056797773577272891998f, 0.030313350260257720947f, -0.024680035188794136047f, -0.015912603586912155151f, -0.039694610983133316040f, -0.0020214195828884840012f, 0.039157282561063766479f, -0.032985985279083251953f, -0.030814424157142639160f, 0.0076585602946579456329f, 0.0041604056023061275482f, 0.019476650282740592957f, 0.016740744933485984802f, -0.033977139741182327271f, -0.016795091331005096436f, 0.042207371443510055542f, 0.0092040384188294410706f, -0.016543122008442878723f, -0.045063380151987075806f, -0.044496316462755203247f, -0.015400783158838748932f, -0.041400428861379623413f, -0.040958765894174575806f, 0.010506482794880867004f, 0.022030996158719062805f, 0.029173377901315689087f, -0.031735446304082870483f, 0.020112849771976470947f, -0.014721599407494068146f, 0.013161049224436283112f, -0.019219567999243736267f, 0.025726277381181716919f, 0.018975364044308662415f, -0.011581945233047008514f, -0.037267681211233139038f, 0.033763736486434936523f, 0.028745705261826515198f, -0.029794195666909217834f, -0.041017051786184310913f, 0.040303133428096771240f, 0.030936593189835548401f, 0.021198110654950141907f, 0.011601810343563556671f, -0.013490091077983379364f, -0.018544236198067665100f, -0.041479885578155517578f, -0.037977807223796844482f, -0.031870786100625991821f, -0.0032656330149620771408f, 0.0055920719169080257416f, 0.014858362264931201935f, 0.023073714226484298706f, 0.015863606706261634827f, -0.014524091035127639771f, -0.040877252817153930664f, 0.015621546655893325806f, 0.015750648453831672668f, 0.031532410532236099243f, -0.018841115757822990417f, -0.025666659697890281677f, 0.033602476119995117188f, 0.037563372403383255005f, 0.037453517317771911621f, 0.042941264808177947998f, 0.012644902803003787994f, 0.0047630006447434425354f, -0.0074047693051397800446f, -0.038189638406038284302f, -0.0077796201221644878387f, 0.034440286457538604736f, -0.024003630504012107849f, 0.044868156313896179199f, 0.042639479041099548340f, -0.039790499955415725708f, 0.044613566249608993530f, -0.016938289627432823181f, -0.043673276901245117188f, -0.035594075918197631836f, -0.0017525949515402317047f, -0.011863969266414642334f, 0.0058045969344675540924f, -0.021643059328198432922f, -0.034008681774139404297f, 0.0051247109659016132355f, -0.014623572118580341339f, -0.029854096472263336182f, -0.0044975820928812026978f, 0.0045275464653968811035f, 0.030858540907502174377f, 0.016883797943592071533f, 0.019189635291695594788f, 0.017766801640391349792f, 0.012158825062215328217f, 0.031534988433122634888f, -0.023920925334095954895f, 0.025400593876838684082f, -0.044995941221714019775f, -0.040567435324192047119f, -0.024054074659943580627f, -0.038303460925817489624f, -0.0070472322404384613037f, 0.00037512814742513000965f, -0.033988863229751586914f, -0.0041753798723220825195f, -0.027276385575532913208f, -0.043232057243585586548f, 0.018880764022469520569f, 0.017596188932657241821f, -0.0027540465816855430603f, -0.012923282571136951447f, -0.031334079802036285400f, 0.00056791841052472591400f, 0.010439110919833183289f, 0.0081087546423077583313f, -0.0014876062050461769104f, -0.024848725646734237671f, 0.014223370701074600220f, 0.0010020883055403828621f, -0.012999000959098339081f, -0.0063167707994580268860f, -0.036068368703126907349f, 0.033558104187250137329f, 0.044076580554246902466f, -0.010246603749692440033f, 0.043600697070360183716f, 0.030394161120057106018f, -0.033680226653814315796f, -0.023055458441376686096f, 0.027178511023521423340f, -0.034459080547094345093f, 0.0058807567693293094635f, -0.028749231249094009399f, -0.020963238552212715149f, -0.019802678376436233521f, -0.022292394191026687622f, -0.035270083695650100708f, -0.013219193555414676666f, -0.044202357530593872070f, 0.032700289040803909302f, -0.045138765126466751099f, -0.035365574061870574951f, -0.021130336448550224304f, -0.0050720297731459140778f, 0.0073916562832891941071f, -0.0028090402483940124512f, -0.0058372872881591320038f, 0.035453803837299346924f, 0.044650983065366744995f, -0.0077767199836671352386f, 0.017619073390960693359f, -0.015087036415934562683f, -0.035536114126443862915f, -0.010901574045419692993f, -0.021885974332690238953f, 0.016291089355945587158f, 0.0048106377944350242615f, -0.015676420181989669800f, -0.018563443794846534729f, -0.013397003524005413055f, -0.022188887000083923340f, -0.042724393308162689209f, 0.040035344660282135010f, 0.0062689380720257759094f, 0.0047785351052880287170f, -0.0057129464112222194672f, -0.010447930544614791870f, -0.0069937296211719512939f, -0.0018749986775219440460f, -0.016284484416246414185f, 0.0094515662640333175659f, -0.036527670919895172119f, 0.026546387001872062683f, -0.011819020844995975494f, -0.0086177177727222442627f, 0.017917972058057785034f, -0.020941240713000297546f, -0.018933413550257682800f, -0.033291690051555633545f, -0.038894355297088623047f, 0.045038435608148574829f, -0.039125371724367141724f, 0.041101034730672836304f, -0.024089900776743888855f, 0.033286694437265396118f, 0.025100808590650558472f, -0.022985517978668212891f, -0.018200002610683441162f, -0.044099841266870498657f, 0.0089293159544467926025f, -0.0048762359656393527985f, -0.026813019067049026489f, -0.022498264908790588379f, -0.0044448627158999443054f, -0.041821610182523727417f, 0.032134171575307846069f, -0.011759456247091293335f, -0.027576595544815063477f, 0.0080440212041139602661f, 0.023488044738769531250f, 0.0098089566454291343689f, -0.030949462205171585083f, 0.033699959516525268555f, -0.012325774878263473511f, 0.0089988969266414642334f, -0.030297609046101570129f, 0.012352610938251018524f, -0.034245871007442474365f, 0.028015293180942535400f, 0.025797611102461814880f, 0.034123875200748443604f, 0.012750891037285327911f, 0.0071426592767238616943f, -0.0054167746566236019135f, -0.011524981819093227386f, 0.021734258159995079041f, -0.022477513179183006287f, 0.0070790629833936691284f, 0.029569558799266815186f, -0.024021696299314498901f, -0.019794341176748275757f, -0.024095809087157249451f, 0.0038422518409788608551f, 0.021701313555240631104f, -0.027311867102980613708f, -0.034713741391897201538f, 0.0079268738627433776855f, 0.035923726856708526611f, -0.037458386272192001343f, 0.038195431232452392578f, 0.027850225567817687988f, -0.013670002110302448273f, 0.029058102518320083618f, 0.044624131172895431519f, 0.0098202247172594070435f, 0.0092532755807042121887f, -0.040466621518135070801f, 0.0061938883736729621887f, -0.031030768528580665588f, -0.0066518471576273441315f, 0.0068357842974364757538f, -0.0075047230347990989685f, 0.015982484444975852966f, 0.010389787144958972931f, 0.019623942673206329346f, -0.035508312284946441650f, -0.018597254529595375061f, -0.018306506797671318054f, -0.037931766360998153687f, -0.010390455834567546844f, -0.017917215824127197266f, 0.036444213241338729858f, 0.041908010840415954590f, -0.037770301103591918945f, 0.044242464005947113037f, -0.014188161119818687439f, -0.013312339782714843750f, 0.024915635585784912109f, -0.022343061864376068115f, -0.023174930363893508911f, 0.027798289433121681213f, 0.0011457561049610376358f, -0.033357914537191390991f, 0.011651689186692237854f, -0.028998592868447303772f, 0.013553762808442115784f, 0.0048267110250890254974f, -0.016114382073283195496f, -0.040757350623607635498f, 0.0026229314971715211868f, -0.028141031041741371155f, -0.039442498236894607544f, -0.034422576427459716797f, -0.0070085134357213973999f, -0.020700791850686073303f, -0.017252156510949134827f, -0.043738871812820434570f, 0.0053470791317522525787f, 0.0028159830253571271896f, -0.025853682309389114380f, -0.036246668547391891479f, -0.021559348329901695251f, -0.043487027287483215332f, 0.027238363400101661682f, -0.010642979294061660767f, 0.043859392404556274414f, -0.020849214866757392883f, 0.039543166756629943848f, 0.033344779163599014282f, 0.021854512393474578857f, 0.039455682039260864258f, 0.028562011197209358215f, 0.0086145242676138877869f, -0.0029130256734788417816f, 0.0073823411948978900909f, -0.035215783864259719849f, -0.021782798692584037781f, -0.022307144477963447571f, -0.023404475301504135132f, -0.033626060932874679565f, -0.028326116502285003662f, -0.044167388230562210083f, -0.030700208619236946106f, 0.011365197598934173584f, 0.011796918697655200958f, 0.043811134994029998779f, -0.032612897455692291260f, 0.0011780002387240529060f, 0.012923810631036758423f, -0.039427518844604492188f, 0.0082743065431714057922f, 0.0086019225418567657471f, -0.029605479910969734192f, -0.0049658571369946002960f, -0.044655174016952514648f, 0.023649701848626136780f, 0.018978323787450790405f, -0.014635531231760978699f, -0.033309064805507659912f, -0.024947471916675567627f, -0.042606245726346969604f, -0.038955613970756530762f, -0.025724465027451515198f, -0.036872796714305877686f, -0.0091912131756544113159f, -0.019719673320651054382f, 0.025682520121335983276f, -0.035791940987110137939f}
};
static const float tensor_main_3_bias[1] = 
{-0.020550681278109550476f};
union tensor_union_0 {
float tensor__main_main_0_Conv_output_0[1][3][16][10];
float tensor__main_main_2_Flatten_output_0[1][480];
};
static union tensor_union_0 tu0;

union tensor_union_1 {
float tensor__main_main_1_Relu_output_0[1][3][16][10];
};
static union tensor_union_1 tu1;


static inline void node__main_main_0_Conv( const float x[1][1][16][10], const float w[3][1][3][3], const float bias[3], float y[1][3][16][10] )
{
	/* Conv
	 *
	 * auto_pad: NOTSET
	 * dilations: 1 1 
	 * group: 1
	 * kernel_shape: 3 3 
	 * pads: 1 1 1 1 
	 * strides: 1 1 
	 */
	for( uint32_t b=0; b<1; b++ ) {
	for( uint32_t m=0; m<3; m++) {
		for( int32_t o0=0, i0=-1; o0<16; o0++, i0+=1) {
		for( int32_t o1=0, i1=-1; o1<10; o1++, i1+=1) {
			y[b][m][o0][o1] = bias[m];
			for( int32_t c=0; c<1; c++ ) {
			for( uint32_t k0=0; k0<3; k0++ ) {
			for( uint32_t k1=0; k1<3; k1++ ) {
				int ii0 = i0+k0 * 1;
				if( ii0<0) continue;
				if( ii0>=16) continue;
				int ii1 = i1+k1 * 1;
				if( ii1<0) continue;
				if( ii1>=10) continue;
				y[b][m][o0][o1] += x[b][c][ii0][ii1] *w[m][c][k0][k1];
			} /* k */
			} /* k */
			} /* c */
		} /* o */
		} /* o */
	} /* m */
	} /* b */
}

static inline void node__main_main_1_Relu( const float tensor__main_main_0_Conv_output_0[1][3][16][10], float tensor__main_main_1_Relu_output_0[1][3][16][10] )
{
	/*Relu*/
	float *X = (float*)tensor__main_main_0_Conv_output_0;
	float *Y = (float*)tensor__main_main_1_Relu_output_0;
	for( uint32_t i=0; i<480; i++ )
		Y[i] = X[i] > 0 ? X[i] : 0;

}

static inline void node__main_main_2_Flatten( const float tensor__main_main_1_Relu_output_0[1][3][16][10], float tensor__main_main_2_Flatten_output_0[1][480] )
{
	/* Flatten*/
	float *input = (float*)tensor__main_main_1_Relu_output_0;
	float *output = (float*)tensor__main_main_2_Flatten_output_0;
	for( uint32_t i=0; i<480; i++ )
		output[i] = input[i];

}

static inline void node__main_main_3_Gemm( const float tensor__main_main_2_Flatten_output_0[1][480], const float tensor_main_3_weight[1][480], const float tensor_main_3_bias[1], float tensor_output[1][1] )
{
	/* Gemm */
	/* alpha   = 1.0000000000000000000
	   beta    = 1.0000000000000000000
	   transA  = 0
	   transB  = 1
	 */
	const int M = 1;
	const int K = 480;
	const int N = 1;
	float (*A)[480]  = (float(*)[480])tensor__main_main_2_Flatten_output_0;
	float (*Y)[1]  = (float(*)[1])tensor_output;
	float alpha = 1.0000000000000000000;
	float beta = 1.0000000000000000000;
	float (*C)[1]  = (float(*)[1])tensor_main_3_bias;
	for( uint32_t r=0; r<M; r++ )
		for( uint32_t c=0; c<N; c++ ) {
			float ABrc = 0;
			for( uint32_t i=0; i<K; i++ ) {
				float B = tensor_main_3_weight[c][i];
				ABrc += A[r][i] * B;
			}
			float tmp = ABrc * alpha;
			tmp += C[0][0] * beta;
			Y[r][c] = tmp;
	}
}
